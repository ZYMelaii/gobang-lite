# gobang-lite

### 关于五子棋的架构&细则

__五子棋层次__

* BoardStatus __`棋盘状态`__
	- 落子及其判定
	- 状态查询
	- 历史记录操作
	- 重置
* PlayerBase __`棋手基类`__
	- 回合预备动作 @抽象方法
	- 棋盘状态查询 @抽象方法
	- 可用棋子数查询 @抽象方法
	- 落子及其判定
	- 落子通知
* Player: PlayerBase __`至多绑定至单个棋局的棋手对象`__
	- 可用棋子数查询 @绑定至当前参加的棋局
	- 棋盘状态查询 @绑定至当前参加棋局的棋盘
	- 棋局邀请处理
* Game __`单场棋局`__
	- 棋手邀请
	- 棋局规则定制
	- 落子及其判定
	- 落子通知
	- 回合切换
	- 对局动态
	- 胜负/平局判定
	- 重启/终止棋局

__细则__

1. Game & Player
	1. Game 可以邀请 Player 加入棋局
	2. Player 可以拒绝 Game 的邀请
	3. Player 接受 Game 的邀请且 Player 的对手不是自己则 Player 成功加入棋局
2. term & prepare & drop
	1. Game 通知轮到对棋的 Player
	2. Player 收到通知执行 prepare 并在未来的某个时刻落子
	3. 若 Player 落子成功，则更新棋盘，并通知 Game 以及其他对落子通知感兴趣的对象
	4. Game 接受到落子成功的通知则补全落子消息并再次转发给其他对落子通知感兴趣的对象
	5. Player 将持续处于当前回合直到 Game 收到切换回合的通知

__UI层次__

* ImageView @底层背景
	- AeroPane @状态栏面板
		+ Button @开局按钮
	- AeroPane @棋盘面板
		+ Pane @棋盘视图修饰
			* View @棋盘视图

__控件说明__

1. Button
	1. 悬停呈现预选状态
	2. 单击鼠标触发按钮点击
2. View
	1. 滚轮控制视图缩放，缩放中心为天元
	2. Ctrl+滚轮控制视图缩放，缩放中心选为距离鼠标最近的格点
	3. 按下鼠标按钮进行棋盘的拖拽，松开鼠标或鼠标离开视图时终止拖拽
	4. 双击视图，视图的大小与位置复原为初始状态
	5. 当前回合为用户时，靠近格点将呈现下棋位置预览
